(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{260:function(e,t,n){e.exports=n(449)},270:function(e,t,n){},449:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(42),c=n.n(u),l=n(56),o=(n(269),n(78)),i=n(57),s=(n(270),n(35)),m=n(36),p=n(38),d=n(37),E=n(39);function y(e){return r.a.createElement("div",null,"Hello Payment Container")}function h(e){return r.a.createElement("div",null,"Hello Payment List Container")}var f=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.a,{path:"".concat(this.props.match.path,"/:id"),component:y}),r.a.createElement(i.a,{exact:!0,path:this.props.match.path,render:function(){return r.a.createElement("div",null,r.a.createElement(h,null))}}))}}]),t}(a.Component),C=n(460),b=n(450),v=n(463),O=n(459),g=n(59),j=n(461),_=n(458),S=n(457),U=n(69),R=n.n(U),T="REQUEST_CUSTOMER",P="REQUEST_CUSTOMER_SUCCESS",A="REQUEST_CUSTOMER_ERROR",F="SELECT_CUSTOMER";function B(e){return function(t){t(function(e){return{type:T,id:e}}(e));var n="http://35.228.187.212:8080/customerservice/customers/"+e;return R()(n).then(function(e){return e.json()},function(n){t({type:A,err:{msg:"Error fetching customer",id:e}})}).then(function(e){return t({type:P,customer:e})})}}var I="REQUEST_PAYMENT",w="REQUEST_PAYMENT_SUCCESS",M="REQUEST_PAYMENT_ERROR";function N(e){return function(t){t({type:I,id:e});var n="http://192.168.99.100:8080/payments/"+e;return R()(n).then(function(e){return e.json()},function(n){t({type:M,err:{msg:"Error fetching payment",customerId:e}})}).then(function(e){return t({type:w,payments:e})})}}var H="PAYMENT_FORM_UPDATED",k="SAVE_PAYMENT",D="SAVE_PAYMENT_SUCCESS",Q="SAVE_PAYMENT_ERROR";function x(e){return function(t){t(function(e){return{type:k,payment:e}}(e));var n=e.payment_to;return e.payment_from="FK",e.description="TFP",e.payment_date=e.paymentDate,fetch("http://192.168.99.100:8080/payments/"+n,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()},function(e){t({type:Q,err:{msg:"Error fetching payment",customerId:n}})}).then(function(e){return t({type:D,payment:e})})}}function Y(e){return r.a.createElement(C.a,{trigger:r.a.createElement(b.a,null,"New payment"),size:"small"},r.a.createElement(v.a,{icon:"archive",content:"Archive Old Messages"}),r.a.createElement(C.a.Content,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Payment Date"),r.a.createElement("input",{type:"text",value:e.paymentDate,onChange:function(t){return e.onUpdate({payment_to:e.id,paymentDate:t.target.value})}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"From"),r.a.createElement("input",{type:"text",value:e.from,onChange:function(t){return e.onUpdate({payment_to:e.id,from:t.target.value})}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Amount"),r.a.createElement("input",{type:"text",value:e.amount,onChange:function(t){return e.onUpdate({payment_to:e.id,amount:t.target.value})}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Currency"),r.a.createElement("input",{type:"text",value:e.currency,onChange:function(t){return e.onUpdate({payment_to:e.id,currency:t.target.value})}})))),r.a.createElement(C.a.Actions,null,r.a.createElement(b.a,{basic:!0,color:"red",inverted:!0},r.a.createElement(g.a,{name:"remove"})," No"),r.a.createElement(b.a,{color:"green",inverted:!0,onClick:function(t){return e.onSave(e.data)}},r.a.createElement(g.a,{name:"checkmark"})," Yes")))}function L(e){var t=e.payments?e.payments.map(function(e){return r.a.createElement(j.a.Row,{key:e.id},r.a.createElement(j.a.Cell,null,e.payment_date),r.a.createElement(j.a.Cell,null,e.creation_date),r.a.createElement(j.a.Cell,null,e.payment_from),r.a.createElement(j.a.Cell,null,e.payment_to),r.a.createElement(j.a.Cell,null,e.amount),r.a.createElement(j.a.Cell,null,e.currency),r.a.createElement(j.a.Cell,null,e.status),r.a.createElement(j.a.Cell,null,e.description))}):[];return r.a.createElement(j.a,{celled:!0},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.HeaderCell,null,"Payment Date"),r.a.createElement(j.a.HeaderCell,null,"Creation Date"),r.a.createElement(j.a.HeaderCell,null,"From"),r.a.createElement(j.a.HeaderCell,null,"To"),r.a.createElement(j.a.HeaderCell,null,"Amount"),r.a.createElement(j.a.HeaderCell,null,"Currency"),r.a.createElement(j.a.HeaderCell,null,"Status"),r.a.createElement(j.a.HeaderCell,null,"Description"))),r.a.createElement(j.a.Body,null,t))}var J=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCustomer(this.props.id),this.props.selectCustomer(this.props.id),this.props.fetchPayment(this.props.id)}},{key:"render",value:function(){return r.a.createElement(_.a,{loading:this.props.isBusy.toString()},r.a.createElement(v.a,{size:"medium"},"Customer"),r.a.createElement(O.a,null,r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Id"),r.a.createElement(S.a,null,this.props.id)),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement(S.a,null,this.props.name)),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Payment Method"),r.a.createElement(S.a,null,this.props.paymentMethod))),r.a.createElement(Y,{id:this.props.id,data:this.props.paymentForm,onUpdate:this.props.updatePaymentForm,onSave:this.props.postPayment}),r.a.createElement(L,{payments:this.props.payments}))}}]),t}(a.Component),V=Object(l.b)(function(e){return e.customers.isBusy||e.payments.isBusy||!e.customers.selectedCustomerId?{isBusy:!0,name:null,paymentMethod:null,payments:[],paymentForm:null}:{isBusy:!0,name:e.customers.byId[e.customers.selectedCustomerId].name,paymentMethod:e.customers.byId[e.customers.selectedCustomerId].paymentMethod,payments:e.payments.byCustomerId[e.customers.selectedCustomerId],paymentForm:e.paymentForm}},function(e){return{fetchCustomer:function(t){return e(B(t))},selectCustomer:function(t){return e(function(e){return{type:F,id:e}}(t))},fetchPayment:function(t){return e(N(t))},updatePaymentForm:function(t){return e(function(e){return{type:H,data:e}}(t))},postPayment:function(t){return e(x(t))}}})(J);var z=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(V,{id:this.props.match.params.id})}}]),t}(a.Component),K=new(n(245).Ketting)("https://api.example.org/"),W="URL_UPDATE",$="PATH_UPDATE",q="REQ_HAL",G="REQ_HAL_SUCCESS",X="REQ_HAL_ERROR";function Z(e,t){return function(n){n(function(e,t){return{type:q,url:e,path:t}}(e,t));var a=e+t;return K.fetch(a).then(function(e){return e.json()},function(a){console.log("error fetching account"),n({type:X,err:{msg:"Error fetching account",url:e,path:t}})}).then(function(e){return n({type:G,resource:e})})}}var ee=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).call(this))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:function(t){return e.props.onUrlUpdated(t.target.value)}}),r.a.createElement("input",{type:"text",onChange:function(t){return e.props.onPathUpdated(t.target.value)}}),r.a.createElement("button",null,"Fetch"),r.a.createElement(b.a,null,"Fetch"),r.a.createElement("div",null,JSON.stringify(this.props.resource)))}}]),t}(a.Component),te=Object(l.b)(function(e){return{url:e.url,path:e.path,resource:e.resource}},function(e,t){return{onUrlUpdated:function(t){return e(function(e){return{type:W,url:e}}(t))},onPathUpdated:function(t){return e(function(e){return{type:$,path:e}}(t))},onFetch:function(t,n){return e(Z(t,n))}}})(ee),ne=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.a,{exact:!0,path:this.props.match.path,render:function(){return r.a.createElement("div",null,r.a.createElement(te,null))}}))}}]),t}(a.Component);function ae(){return r.a.createElement("header",{className:"nav"})}var re=function(){return r.a.createElement("div",null,r.a.createElement(ae,null),r.a.createElement(o.a,null,r.a.createElement(i.a,{path:"/payment",component:f}),r.a.createElement(i.a,{path:"/customer/:id",component:z}),r.a.createElement(i.a,{path:"/hal",component:ne})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n(81),ce=n(246),le=n(247),oe="REQUEST_ACCOUNT",ie="REQUEST_ACCOUNT_SUCCESS",se="REQUEST_ACCOUNT_ERROR";function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isBusy:!1,allIds:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return function(e,t){return Object.assign({},e,{isBusy:!0})}(e);case ie:case se:return function(e,t){return Object.assign({},e,{isBusy:!1})}(e);default:return e}}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isBusy:!1,byId:{},allIds:[],selectedCustomerId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return function(e,t){return Object.assign({},e,{isBusy:!0})}(e);case P:return function(e,t){var n=Object.assign({},e,{isBusy:!1});return n.byId[t.customer.id]=t.customer,n}(e,t);case A:return function(e,t){return Object.assign({},e,{isBusy:!1})}(e);case F:return function(e,t){return Object.assign({},e,{selectedCustomerId:t.id})}(e,t);default:return e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isBusy:!1,byCustomerId:{},allIds:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return function(e,t){return Object.assign({},e,{isBusy:!0})}(e);case w:return function(e,t){var n=Object.assign({},e,{isBusy:!1});if(!t.payments||!t.payments._embedded)return n;return t.payments._embedded["rel:payment"].forEach(function(e){var t=e.payment_to;n.byCustomerId[t]||(n.byCustomerId[t]=[]),n.byCustomerId[t].push(e)}),n}(e,t);case M:return function(e,t){return Object.assign({},e,{isBusy:!1})}(e);default:return e}}function Ee(e,t){switch(t.type){case W:return function(e,t){return Object.assign({},e,{url:t.url})}(e,t);case $:return function(e,t){return Object.assign({},e,{path:t.path})}(e,t);case q:return function(e,t){return Object.assign({},e,{isBusy:!0})}(e);case G:return function(e,t){return Object.assign({},e,{isBusy:!1,resource:t.resource,err:void 0})}(e,t);case X:return function(e,t){return Object.assign({},e,{isBusy:!1,resource:null,err:t.err})}(e,t);default:return e}}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return function(e,t){return Object.assign({},e,t.data)}(e,t);default:return e}}var he=Object(le.createLogger)(),fe=Object(ue.c)(function(e,t){return{accounts:me(e.accounts,t),customers:pe(e.customers,t),payments:de(e.payments,t),hal:Ee(e.hal,t),paymentForm:ye(e.paymentForm,t)}},{},Object(ue.a)(ce.a,he));c.a.render(r.a.createElement(l.a,{store:fe},r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[260,1,2]]]);
//# sourceMappingURL=main.098bb05a.chunk.js.map